# üìò –ö–∞—Å—Å–∞, –§–æ—Ç–æ, –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã, –õ–∏–º–∏—Ç—ã (13‚Äì16)

[‚Üê –ù–∞–∑–∞–¥ –∫ –æ–≥–ª–∞–≤–ª–µ–Ω–∏—é](README.md)

---

## 13. –ö–∞—Å—Å–∞ –∏ –ü–ª–∞—Ç–µ–∂–∏

### 13.1. `setPayment` ‚Äî –°–æ–∑–¥–∞—Ç—å –æ–ø–ª–∞—Ç—É

**–û–ø–∏—Å–∞–Ω–∏–µ:** –°–æ–∑–¥–∞–Ω–∏–µ –æ–ø–ª–∞—Ç—ã –∫–ª–∏–µ–Ω—Ç–∞. –ú–æ–∂–Ω–æ –ø—Ä–∏–≤—è–∑–∞—Ç—å –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É –∑–∞–∫–∞–∑—É.

**–ó–∞–ø—Ä–æ—Å:**
```json
{
    "method": "setPayment",
    "auth": { "userId": "d0_1", "token": "..." },
    "data": {
        "payment": [
            {
                "code_1C": "PAY000001",
                "amount": 5000000,
                "paymentDate": "2025-06-15 14:30:00",
                "expirationDate": null,
                "comment": "–û–ø–ª–∞—Ç–∞ –∑–∞ —Ç–æ–≤–∞—Ä",
                "client": { "code_1C": "000000100" },
                "agent": { "code_1C": "000000003" },
                "paymentType": { "code_1C": "000000001" },
                "trade": { "SD_id": "1" },
                "order": { "SD_id": "d0_300" }
            }
        ]
    }
}
```

**–ü–æ–ª—è:**

| –ü–æ–ª–µ | –¢–∏–ø | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|:---:|----------|
| `code_1C` / `SD_id` | string | ‚úÖ | –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä |
| `amount` | float | ‚úÖ | –°—É–º–º–∞ (>0) |
| `paymentDate` | string | ‚úÖ | –î–∞—Ç–∞ –æ–ø–ª–∞—Ç—ã |
| `expirationDate` | string | ‚ùå | –î–∞—Ç–∞ –∏—Å—Ç–µ—á–µ–Ω–∏—è |
| `comment` | string | ‚ùå | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
| `client` | object | ‚úÖ | –ö–ª–∏–µ–Ω—Ç |
| `agent` | object | ‚ùå | –ê–≥–µ–Ω—Ç |
| `paymentType` | object | ‚úÖ | –¢–∏–ø –æ–ø–ª–∞—Ç—ã |
| `trade` | object | ‚ùå | –¢–æ—Ä–≥–æ–≤–æ–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ |
| `order` | object | ‚ùå | –ó–∞–∫–∞–∑ –¥–ª—è –ø—Ä–∏–≤—è–∑–∫–∏ (–∑–∞–∫—Ä—ã—Ç–∏–µ –¥–æ–ª–≥–∞) |

---

### 13.2. `setBalance` ‚Äî –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –Ω–∞—á–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å

**–û–ø–∏—Å–∞–Ω–∏–µ:** –°–æ–∑–¥–∞–Ω–∏–µ –∏–ª–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞—á–∞–ª—å–Ω–æ–≥–æ –±–∞–ª–∞–Ω—Å–∞ –∫–ª–∏–µ–Ω—Ç–∞.

**–ó–∞–ø—Ä–æ—Å:**
```json
{
    "method": "setBalance",
    "auth": { "userId": "d0_1", "token": "..." },
    "data": {
        "balance": [
            {
                "code_1C": "BAL000001",
                "amount": 1000000,
                "paymentDate": "2025-01-01 00:00:00",
                "comment": "–ù–∞—á–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å",
                "client": { "code_1C": "000000100" },
                "agent": { "code_1C": "000000003" },
                "paymentType": { "code_1C": "000000001" }
            }
        ]
    }
}
```

---

### 13.3. `setCurrentBalance` ‚Äî –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç–µ–∫—É—â–∏–π –±–∞–ª–∞–Ω—Å

**–û–ø–∏—Å–∞–Ω–∏–µ:** –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Ç–µ–∫—É—â–µ–≥–æ –±–∞–ª–∞–Ω—Å–∞ –∫–ª–∏–µ–Ω—Ç–∞. –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç —Ä–∞–∑–Ω–∏—Ü—É –º–µ–∂–¥—É –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–º –∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –±–∞–ª–∞–Ω—Å–æ–º –∏ —Å–æ–∑–¥–∞—ë—Ç –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É—é—â—É—é —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é.

> ‚ö†Ô∏è **Rate limit:** –ú–∞–∫—Å–∏–º—É–º 3 –∑–∞–ø—Ä–æ—Å–∞ –∑–∞ 5 –º–∏–Ω—É—Ç.

**–ó–∞–ø—Ä–æ—Å:**
```json
{
    "method": "setCurrentBalance",
    "auth": { "userId": "d0_1", "token": "..." },
    "data": {
        "currentBalance": [
            {
                "code_1C": "000000100",
                "balance": 500000,
                "paymentType": { "code_1C": "000000001" }
            }
        ]
    }
}
```

---

### 13.4. `setConsumption` ‚Äî –°–æ–∑–¥–∞—Ç—å —Ä–∞—Å—Ö–æ–¥

**–û–ø–∏—Å–∞–Ω–∏–µ:** –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –æ —Ä–∞—Å—Ö–æ–¥–µ –∏–∑ –∫–∞—Å—Å—ã.

---

## 14. –§–æ—Ç–æ

### 14.1. `setPhoto` ‚Äî –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–æ—Ç–æ —Ç–æ–≤–∞—Ä–∞

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ó–∞–≥—Ä—É–∑–∫–∞ –∏–ª–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ —Ç–æ–≤–∞—Ä–∞. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–µ—Ä–µ–¥–∞—á—É –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ base64.

**–ó–∞–ø—Ä–æ—Å (—Å base64 –¥–∞–Ω–Ω—ã–º–∏):**
```json
{
    "method": "setPhoto",
    "auth": { "userId": "d0_1", "token": "..." },
    "data": {
        "product": { "code_1C": "000000015" },
        "imageData": "/9j/4AAQSkZJRgABAQ..."
    }
}
```

**–ó–∞–ø—Ä–æ—Å (—Å ID –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è):**
```json
{
    "method": "setPhoto",
    "auth": { "userId": "d0_1", "token": "..." },
    "data": {
        "product": { "code_1C": "000000015" },
        "imageId": "d0_15_abc123.jpg"
    }
}
```

**–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:**
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä: 100KB (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `params.maxImageSize`)
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã: JPEG, PNG, GIF

**–û—Ç–≤–µ—Ç:**
```json
{
    "status": true,
    "result": {
        "product": {
            "SD_id": "d0_15",
            "code_1C": "000000015"
        },
        "imageId": "d0_15_abc123.jpg"
    }
}
```

---

### 14.2. `getPhoto` ‚Äî –ü–æ–ª—É—á–∏—Ç—å —Ñ–æ—Ç–æ —Ç–æ–≤–∞—Ä–∞

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞ –ø–æ ID. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –±–∏–Ω–∞—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è.

**–ó–∞–ø—Ä–æ—Å:**
```json
{
    "method": "getPhoto",
    "auth": { "userId": "d0_1", "token": "..." },
    "params": {
        "imageID": "d0_15_abc123.jpg"
    }
}
```

**–û—Ç–≤–µ—Ç:** –ë–∏–Ω–∞—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å –∑–∞–≥–æ–ª–æ–≤–∫–æ–º `Content-Type: image/jpeg` (–∏–ª–∏ –¥—Ä—É–≥–æ–π MIME-—Ç–∏–ø).

---

## 15. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã

### 15.1. `getFilials` ‚Äî –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Ñ–∏–ª–∏–∞–ª–æ–≤

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –≤—Å–µ—Ö –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ñ–∏–ª–∏–∞–ª–æ–≤.

---

### 15.2. `getStoreLog` ‚Äî –ñ—É—Ä–Ω–∞–ª —Å–∫–ª–∞–¥—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ü–æ–ª—É—á–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ —Å–∫–ª–∞–¥—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π.

---

### 15.3. `getClientPending` ‚Äî –ó–∞—è–≤–∫–∏ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–æ–≤

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∑–∞—è–≤–æ–∫ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–æ–≤, –æ–∂–∏–¥–∞—é—â–∏—Ö –º–æ–¥–µ—Ä–∞—Ü–∏–∏.

---

### 15.4. `deleteClientPending` ‚Äî –£–¥–∞–ª–∏—Ç—å –∑–∞—è–≤–∫—É –Ω–∞ –∫–ª–∏–µ–Ω—Ç–∞

**–û–ø–∏—Å–∞–Ω–∏–µ:** –£–¥–∞–ª–µ–Ω–∏–µ –∑–∞—è–≤–∫–∏ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–∞ –∏–∑ —Å–ø–∏—Å–∫–∞ –æ–∂–∏–¥–∞—é—â–∏—Ö.

---

## 16. –õ–∏–º–∏—Ç—ã –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

### –õ–∏–º–∏—Ç—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|:--------:|----------|
| –õ–∏–º–∏—Ç –æ—Ç–≤–µ—Ç–∞ | 1000 | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π –≤ –æ–¥–Ω–æ–º –æ—Ç–≤–µ—Ç–µ |
| –õ–∏–º–∏—Ç –∑–∞–ø—Ä–æ—Å–∞ | 250 | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π –≤ –æ–¥–Ω–æ–º SET-–∑–∞–ø—Ä–æ—Å–µ |

> –õ–∏–º–∏—Ç—ã –º–æ–≥—É—Ç –±—ã—Ç—å –∏–∑–º–µ–Ω–µ–Ω—ã —á–µ—Ä–µ–∑ —Å–µ—Ä–≤–µ—Ä–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã: `response_limit_1c` –∏ `request_limit_1c`.

### Rate Limiting (–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —á–∞—Å—Ç–æ—Ç—ã)

–ù–µ–∫–æ—Ç–æ—Ä—ã–µ –º–µ—Ç–æ–¥—ã –∏–º–µ—é—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–æ —á–∞—Å—Ç–æ—Ç–µ –≤—ã–∑–æ–≤–æ–≤:

| –ú–µ—Ç–æ–¥ | –ò–Ω—Ç–µ—Ä–≤–∞–ª | –ú–∞–∫—Å. –∑–∞–ø—Ä–æ—Å–æ–≤ |
|-------|:--------:|:--------------:|
| `setStock` | 5 —Å–µ–∫ | 5 |
| `setCurrentBalance` | 5 –º–∏–Ω | 3 |

–ü—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–∞ –∑–∞–ø—Ä–æ—Å –±—É–¥–µ—Ç –æ—Ç–∫–ª–æ–Ω—ë–Ω.

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –¥–∞–Ω–Ω—ã–º

- **JSON —Ñ–æ—Ä–º–∞—Ç:** –ó–∞–ø—Ä–æ—Å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤–∞–ª–∏–¥–Ω—ã–º JSON (–∫–æ–¥–∏—Ä–æ–≤–∫–∞ UTF-8)
- **BOM:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è–µ—Ç—Å—è UTF-8 BOM –µ—Å–ª–∏ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç
- **–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è:** `method` ‚Äî –≤—Å–µ–≥–¥–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ
- **–ü—É—Å—Ç–æ–π –∑–∞–ø—Ä–æ—Å:** –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—à–∏–±–∫—É 400
- **–ù–µ–≤–∞–ª–∏–¥–Ω—ã–π JSON:** –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—à–∏–±–∫—É 400
- **–ó–Ω–∞—á–µ–Ω–∏–µ active:** –ü—Ä–∏–Ω–∏–º–∞–µ—Ç: `true`, `false`, `"Y"`, `"N"`, `"–ò—Å—Ç–∏–Ω–∞"`, `1`, `0`

---

[‚Üê –ù–∞–∑–∞–¥ –∫ –æ–≥–ª–∞–≤–ª–µ–Ω–∏—é](README.md)

